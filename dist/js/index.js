var songList,$=window.Zepto,root=window.player,$scropt=$(document.body),index=0,audio=new root.audioControl;function bindEvent(){$scropt.on("play:change",function(o,t,n){audio.getAudio(songList[t].audio),"play"==audio.status&&(audio.play(),root.process.start()),root.process.renderTime(songList[t].duration),root.render(songList[t]),root.process.updata(0)}),$scropt.on("click",".prev-btn",function(){var o=controlManger.prev();$scropt.trigger("play:change",o)}),$scropt.on("click",".next-btn",function(){var o=controlManger.next();$scropt.trigger("play:change",o)}),$scropt.on("click",".play-btn",function(){"play"==audio.status?(root.process.stop(),audio.pause(),$scropt.find(".play-btn").removeClass("pause")):(audio.play(),root.process.start(),$scropt.find(".play-btn").addClass("pause"))})}function touchEvent(){var o=$scropt.find(".round"),t=$scropt.find(".pro-wrapper").offset(),r=t.left,a=t.width;o.on("touchstart",function(){root.process.stop()}),o.on("touchmove",function(o){var t=(o.changedTouches[0].clientX-r)/a;t<0&&(t=0),1<t&&(t=1),root.process.updata(t)}),o.on("touchend",function(o){var t=(o.changedTouches[0].clientX-r)/a;t<0&&(t=0),1<t&&(t=1);var n=t*songList[controlManger.index].duration;audio.playTo(n),$scropt.find(".play-btn").addClass("pause")})}function getDate(o){$.ajax({type:"GET",url:o,success:function(o){root.render(o[0]),songList=o,bindEvent(),touchEvent(),controlManger=new root.controlManger(o.length),$scropt.trigger("play:change",0)},error:function(){}})}getDate("../mock/data.json");